/* --- ESTILOS PARA EL PANEL DEL DOCENTE --- */
:root {
    --color-background: #F0F2F5;
    --color-surface: #FFFFFF;
    --color-text: #1C2A4B;
    --color-text-muted: #6B7280;
    --color-primary: #38BDF8;
    --color-secondary: #3730A3;
    --gradient: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    --color-border: #E5E7EB;
    --color-danger: #EF4444;
    --color-danger-bg: #FEE2E2;
    --shadow-md: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -2px rgba(0,0,0,0.05);
    --font-family: 'Poppins', sans-serif;
    --border-radius: 16px;
    --transition-speed: 0.3s;
    --color-secondary-bg: #EEF2FF;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: var(--font-family);
    background-color: var(--color-background);
    color: var(--color-text);
    line-height: 1.6;
}

.header {
    background-color: var(--color-surface);
    box-shadow: var(--shadow-md);
    padding: 1rem 5%;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
}

.logo {
    font-weight: 700;
    font-size: 1.5rem;
    text-decoration: none; /* Añadido */
    color: var(--color-text); /* Añadido */
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

#user-name {
    font-weight: 600;
}

.main-container {
    max-width: 1200px;
    margin: 2.5rem auto;
    padding: 0 5%;
    display: grid;
    gap: 2rem;
}

.card {
    background: var(--color-surface);
    border-radius: var(--border-radius);
    padding: 2rem;
    box-shadow: var(--shadow-md);
}

.card h2 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 1rem;
}

.input-group {
    margin-bottom: 1.25rem;
}

.input-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.input-group input,
.input-group textarea,
.input-group select {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 2px solid var(--color-border);
    font-size: 1rem;
    font-family: var(--font-family);
    transition: border-color var(--transition-speed);
    background-color: var(--color-surface); /* Asegura fondo blanco para select */
}

.input-group input:focus,
.input-group textarea:focus,
.input-group select:focus {
    outline: none;
    border-color: var(--color-secondary);
}

.cta-button {
    background: var(--gradient);
    color: var(--color-surface);
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    transition: all var(--transition-speed) ease;
}

.cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(55, 48, 163, 0.2);
}

.cta-button.secondary {
    background: transparent;
    color: var(--color-secondary);
    border: 2px solid var(--color-secondary);
}

.cta-button.danger {
    background: transparent;
    color: var(--color-danger);
    border: 2px solid var(--color-danger);
}
.cta-button.danger:hover {
    background-color: var(--color-danger-bg);
    box-shadow: 0 8px 20px rgba(239, 68, 68, 0.2);
}

.rooms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
}

.room-card {
    border: 1px solid var(--color-border);
    padding: 1.5rem;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
}

.room-card h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
}

.room-card p {
    color: var(--color-text-muted);
    margin-bottom: 1rem;
}

.room-code {
    background-color: var(--color-secondary-bg);
    color: var(--color-secondary);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-weight: 700;
    font-family: monospace;
    font-size: 1.1rem;
    text-align: center;
    margin-bottom: 1rem;
}

.room-actions {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.manage-button, .view-results-button, .view-analytics-button {
    width: 100%;
    padding: 0.7rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all var(--transition-speed) ease;
}

.manage-button {
    background-color: var(--color-secondary);
    color: var(--color-surface);
}

.manage-button:hover {
    transform: translateY(-2px);
    background-color: #2b257a;
    box-shadow: 0 4px 10px rgba(55, 48, 163, 0.2);
}

.view-results-button {
    background-color: transparent;
    color: var(--color-secondary);
    border: 2px solid var(--color-secondary);
}

.view-results-button:hover {
    background-color: var(--color-secondary-bg);
    color: var(--color-secondary);
}

/* --- ESTILOS PARA LA VISTA DE RESULTADOS --- */
/* ================== MODIFICACIÓN FASE 21 ================== */
.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
    gap: 1rem; /* Añadido */
}

.results-header div { /* Nuevo wrapper */
    display: flex;
    gap: 1rem;
    flex-shrink: 0; /* Evita que los botones se encojan */
}

.results-header .cta-button {
    width: auto; /* Asegura que no ocupen 100% */
}
/* ================ FIN MODIFICACIÓN FASE 21 ================ */


.results-header h2, .questions-header h2 {
    border-bottom: none;
    margin-bottom: 0;
}

.result-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.result-item-name {
    font-weight: 600;
}

.result-item-score {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--color-secondary);
    background-color: var(--color-secondary-bg);
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
}

/* === ESTILOS PARA MODAL === */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(28, 42, 75, 0.6);
    display: none; /* Initially hidden */
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 1;
    transition: opacity var(--transition-speed) ease;
}

.modal-content {
    background: var(--color-surface);
    padding: 2.5rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    width: 100%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    transform: scale(1);
    transition: transform var(--transition-speed) ease;
}

.modal-content h2 {
    text-align: center;
    margin-bottom: 2rem;
}

.options-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.correct-answer-selector {
    display: flex;
    gap: 1rem;
    align-items: center;
}
.correct-answer-selector label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

.modal-actions {
    margin-top: 2rem;
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
}

.modal-actions .cta-button {
    width: auto;
    padding: 0.8rem 2rem;
}

/* === VISTA DE GESTIÓN DE PREGUNTAS === */
.questions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
}

.questions-header .cta-button {
    width: auto;
}

#questions-list-container {
    margin-top: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.question-item {
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
}

.question-item-text {
    font-weight: 600;
    flex-grow: 1;
}

.question-item-actions {
    display: flex;
    gap: 0.75rem;
    flex-shrink: 0;
}

.question-item-actions .cta-button {
    font-size: 0.85rem;
    padding: 0.5rem 1rem;
}

/* --- ESTILOS ADICIONALES PARA BANCO DE PREGUNTAS --- */
.save-to-bank-group {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding: 0.75rem;
    background-color: #f9fafb;
    border-radius: 8px;
}
.save-to-bank-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--color-secondary);
}
.save-to-bank-group label {
    margin-bottom: 0;
    font-weight: 600;
}

.bank-filters {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--color-border);
}

.bank-filters .input-group {
    margin-bottom: 0;
}

.bank-filters select {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 2px solid var(--color-border);
    font-size: 1rem;
    font-family: var(--font-family);
    background-color: var(--color-surface);
}

.bank-questions-list {
    max-height: 40vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.bank-question-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
}

.bank-question-item input[type="checkbox"] {
    margin-top: 4px;
    width: 18px;
    height: 18px;
}

.bank-question-item label {
    flex-grow: 1;
    font-weight: 500;
}
/* ============================================= */
/* ¡NUEVO! (Paso 3.A) Estilos para Indicador de Carga (Spinner) */
/* ============================================= */

/* Este es un spinner de carga simple hecho con CSS puro.
  Usará los colores de nuestra paleta (var(--color-border) y var(--color-secondary)).
*/
.loader {
    width: 48px;
    height: 48px;
    border: 5px solid var(--color-border); /* El color gris de fondo del spinner */
    border-bottom-color: var(--color-secondary); /* El color azul que gira */
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1s linear infinite;
    margin: 2rem auto;
}

@keyframes rotation {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* Usaremos este contenedor para centrar el spinner 
  dentro de #rooms-list, #results-list, etc.
*/
.loader-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 2rem 0;
}


/* ============================================= */
/* ¡NUEVO! (Paso 3.A) Estilos para Modal de Confirmación */
/* ============================================= */

/* Hacemos el modal de confirmación más pequeño y centrado */
.modal-content.confirm-modal {
    max-width: 450px;
    text-align: center;
}

/* Ajustamos el título y el párrafo de descripción */
.modal-content.confirm-modal h2 {
    text-align: center;
    margin-bottom: 1rem;
    border-bottom: none; /* Quitamos la línea divisoria */
}

.modal-content.confirm-modal p {
    color: var(--color-text-muted);
    font-size: 1.1rem;
    margin-bottom: 2rem;
}

/* Reutilizamos la clase .modal-actions pero nos aseguramos
  de que los botones estén centrados en este modal específico.
*/
.modal-content.confirm-modal .modal-actions {
    justify-content: center;
}

/* El botón .cta-button.danger ya estaba definido en nuestro CSS,
  por lo que aquí solo estamos confirmando que se usará.
  ¡No es necesario añadir código nuevo si ya lo tenías!
  Si no, esta es la regla:
*/
.cta-button.danger {
    background: transparent;
    color: var(--color-danger);
    border: 2px solid var(--color-danger);
}
.cta-button.danger:hover {
    background-color: var(--color-danger-bg);
    box-shadow: 0 8px 20px rgba(239, 68, 68, 0.2);
}

/* ============================================= */
/* ¡NUEVO! (Fase 14) Estilos para Vista de Analíticas */
/* ============================================= */

/* Reutilizamos el estilo del header de resultados */
.analytics-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
}

.analytics-header h2 {
    border-bottom: none;
    margin-bottom: 0;
}

/* Grid para las tarjetas de resumen (Promedio, Tasa de Aprobación, etc.) */
.analytics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.analytics-summary-item {
    background-color: #f9fafb;
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
}

.analytics-summary-item h4 {
    color: var(--color-text-muted);
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
}

.analytics-summary-item p {
    color: var(--color-secondary);
    font-size: 1.8rem;
    font-weight: 700;
}

/* Contenedor para las dos listas (difíciles y fáciles) */
.analytics-lists {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-top: 2rem;
}

.analytics-lists .card {
    /* Reseteamos el padding/shadow para las tarjetas anidadas */
    padding: 0;
    box-shadow: none;
}

.analytics-lists h3 {
    font-size: 1.2rem;
    margin-bottom: 1rem;
}

/* Estilo para cada pregunta en las listas */
.analytics-question-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-bottom: 0.75rem;
}

.analytics-question-item p {
    font-weight: 500;
    flex: 1;
    margin: 0;
    padding-right: 1rem;
}

.analytics-question-item span {
    font-weight: 700;
    font-size: 0.9rem;
    white-space: nowrap;
}

/* Estilos de color para las estadísticas */
#difficult-questions-list .analytics-question-item span {
    color: var(--color-danger);
}

#easy-questions-list .analytics-question-item span {
    color: #065F46; /* Un verde oscuro */
}
.view-analytics-button {
    width: 100%;
    padding: 0.7rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all var(--transition-speed) ease;
    background-color: transparent;
    color: var(--color-secondary);
    border: 2px solid var(--color-secondary);
}

.view-analytics-button:hover {
    background-color: var(--color-secondary-bg);
    color: var(--color-secondary);
}

.analytics-summary-item span {
    font-size: 0.9rem;
    color: var(--color-text-muted);
}

.analytics-question-item p {
    /* Truncar texto de pregunta largo */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.analytics-question-item span small {
    font-weight: 400;
    color: var(--color-text-muted);
}

/* --- (Al final de css/docente.css) --- */

/* ============================================= */
/* ¡NUEVO! (Fase 15) Estilos para Gráficos de Analíticas */
/* ============================================= */

/* Contenedor principal para los dos gráficos */
.charts-container {
    display: grid;
    grid-template-columns: 1fr; /* Apilados por defecto en móvil */
    gap: 3rem; /* Espacio generoso entre los gráficos */
    margin-top: 2rem;
}

/* Estilo para cada "caja" de gráfico (título + canvas) */
.chart-wrapper {
    background-color: #f9fafb;
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: 1.5rem 2rem;
}

.chart-wrapper h3 {
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
    text-align: center;
    color: var(--color-text-muted);
    font-weight: 600;
}

/* Este es el contenedor directo del <canvas>.
  La 'position: relative' es crucial para que 
  Chart.js maneje la responsividad correctamente.
*/
.chart-container {
    position: relative;
    width: 100%;
}

/* Media query para ponerlos uno al lado del otro en pantallas grandes */
@media (min-width: 992px) {
    .charts-container {
        /* Lado a lado en pantallas de 992px o más */
        grid-template-columns: 1fr 1fr; 
        gap: 1.5rem;
    }
}

/* (Al final de css/docente.css) */
.form-grid-2 {
    display: grid;
    grid-template-columns: 1fr; /* Apilado en móvil por defecto */
    gap: 1.25rem;
}
@media (min-width: 768px) {
    .form-grid-2 {
        grid-template-columns: 1fr 1fr; /* Lado a lado en escritorio */
    }
}
.input-group small {
    display: block;
    margin-top: 0.5rem;
    font-size: 0.85rem;
    color: var(--color-text-muted);
}

/* ¡NUEVA REGLA - PASO 1 FASE 17 */
.input-group input:read-only {
    background-color: var(--color-background);
    color: var(--color-text-muted);
    cursor: not-allowed;
}

/* ================== NUEVOS ESTILOS (FASE 22) ================== */
.class-card {
    border: 1px solid var(--color-border);
    padding: 1.5rem;
    border-radius: 12px;
    background: #FBFCFF; /* Un fondo ligeramente diferente */
    border-left: 5px solid var(--color-secondary);
}
.class-card h3 { 
    font-size: 1.2rem; 
    margin-bottom: 0.5rem; 
}
.class-card p { 
    color: var(--color-text-muted); 
    margin-bottom: 1rem; 
}
.class-code {
    background-color: #E0E7FF; /* Azul más claro */
    color: var(--color-secondary);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-weight: 700;
    font-family: monospace;
    font-size: 1.1rem;
    text-align: center;
}

/* ================== NUEVOS ESTILOS (FASE 23) ================== */
.input-group select[multiple] {
    height: 120px; /* Darle altura para que se vea como una lista */
    background-color: var(--color-surface);
    padding: 0.5rem; /* Ajuste de padding para select multiple */
}

.input-group select[multiple] option {
    padding: 0.5rem;
    border-radius: 4px;
}

.input-group select[multiple] option:checked {
    background: var(--color-secondary);
    color: var(--color-surface);
}

/* --- TEMAS POR ROL (FASE 26) --- */

/* Tema Docente (Verde) */
body.theme-docente {
    --color-primary: #14B8A6; /* Verde Teal */
    --color-secondary: #166534; /* Verde Bosque */
    --gradient: linear-gradient(135deg, #14B8A6, #166534);
    --color-secondary-bg: #E0F2F1; /* Verde muy claro */
}

/* Tema Estudiante (Naranja) */
body.theme-estudiante {
    --color-primary: #F97316; /* Naranja Vibrante */
    --color-secondary: #9F1239; /* Rojo Granate */
    --gradient: linear-gradient(135deg, #F97316, #9F1239);
    --color-secondary-bg: #FFF7ED; /* Naranja muy claro */
}